{%- liquid
  assign product_available = product.selected_or_first_available_variant.available
-%}

<product-form>
  {%- form 'product',
    product,
    id: product_form_id,
    class: 'form',
    novalidate: 'novalidate',
    data-type: 'add-to-cart-form'
  -%}
    <input
      type="hidden"
      name="id"
      value="{{ product.selected_or_first_available_variant.id }}"
      {% unless product_available %}
        disabled
      {% endunless %}
    >
    <button
      id="{{ product_form_id }}-submit"
      type="submit"
      name="add"
      class="button"
      {% unless product_available %}
        disabled
      {% endunless %}
    >
      <span class="button__text">
        {%- if product_available -%}
          {{ 'general.product.add_to_cart' | t }}
        {%- else -%}
          {{ 'general.product.sold_out' | t }}
        {%- endif -%}
      </span>

      <span class="loading-spinner" aria-hidden="true"></span>
    </button>
  {%- endform -%}
</product-form>
